apiVersion: v1
kind: ConfigMap
metadata:
  name: shared-postgresql-config
  labels:
    app: shared-postgresql
data:
  postgresql.conf: |
    # PostgreSQL configuration file for shared instance

    # Connection settings
    listen_addresses = '*'
    port = 5432

    # Memory settings (increased for multi-database)
    shared_buffers = 256MB
    effective_cache_size = 512MB
    work_mem = 4MB

    # Logging
    log_statement = 'all'
    log_duration = on
    log_database = on

    # Performance settings
    max_connections = 200
    checkpoint_completion_target = 0.9
    wal_buffers = 32MB
    maintenance_work_mem = 64MB

    # Charset
    default_text_search_config = 'pg_catalog.english'

    # Security
    ssl = off